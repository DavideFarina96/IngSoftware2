<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">

        <title>Home page</title>

        <!-- Bootstrap CSS CDN -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <!-- Our Custom CSS -->
        <link rel="stylesheet" href="css/stylehome.css">
        <!-- Scrollbar Custom CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link rel="icon" href="/images/favicon.ico" type="image/x-icon" />
		
		<style>
			.footer {
			  position: fixed;
			  bottom: 0;
			}
			
			.imgResize{ 
				width: auto; 
				height: auto;
				max-width: 20vh;
				max-height: 20vh;			  
			}
            
			
			/* allinea in centro, verticalmente e orizzontalmente */        
            .alignContainer 
            {
                display:table;
            }
            .alignContent
            {
                display:table-cell; vertical-align:middle; text-align: center;
            }
            /*** fine allineamento oggetti ******/
			
			/* stile dell'oggetto footer (che contiene la barra di input) */
			.footerStyle
			{
				height: 5vh;
			}
			
			/* stile della navbar */
			.navbarStyle
			{
				height: 5vh;
			}
            .popover{
                max-width: 90%; /* Max Width of the popover (depending on the container!) */
            }
		</style>
    </head>
    <body>

        <div class="wrapper">
            
			<!-- Sidebar Holder -->
            <nav id="sidebar" style="background-color:#474747">
                <div id="dismiss">
                    <i class="glyphicon glyphicon-arrow-left"></i>
                </div>

                <div class="sidebar-header" style="background-color:#474747">
                    <h3>DISIer</h3>
                </div>

                <ul class="list-unstyled components">
                    <li class="active" >
                        <a href="#"  style="background-color: #a0a0a0">Home</a>
                    </li>
                    
                    <li>
                        <a href="/orari_corsi">Orari Lezioni</a>
                    </li>
                    <li>
                        <a href="/orari_Autobus_s">Orari Trasporti</a>
                    </li>
					<li>
                        <a href="/calendar_s">Calendario</a>
                    </li>
					<li>
                        <a href="/aule_libere">Aule Libere</a>
                    </li>
                </ul>

            </nav>

			<!-- Navbar page -->
            <nav class="navbar navbar-default navbarStyle"> 
                <div class="container-fluid">

                    <div class="navbar-header col-xs-12">
                        <button type="button" id="sidebarCollapse" class="btn btn-info navbar-btn col-xs-3 col-sm-1">
                            <i class="glyphicon glyphicon-align-left"></i>
                            <span></span>
                        </button>
						<!--<p class="col-xs-9 col-sm-8">DISIer</p >-->
						<ul class="nav navbar-nav col-xs-8 col-sm-8">
                            <li align="center"><a href="/">DISIer</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
			
			
            <!-- Page Content Holder -->
            <div id=""> <!-- id="content" -->

				

				<div class="container-fluid" >
					<div class="row" style="margin-top: 5vh">
						<!-- pagina con accoppiamenti di colori: https://coolors.co/browser/latest/3 -->
						<div class="col-xs-6 alignContainer" style="background-color: #1D83A3; height: 45vh;"> <!-- 0091EA -->
							<a href="/orari_corsi" class="alignContent" >
								<img class="imgResize" src="images/orari_e_aule-white.png" />
								<p style="color: white; ">Orari Lezioni</p>
							</a>
						</div>
						<div class="col-xs-6 alignContainer" style="background-color: #D62C26; height: 45vh; "> <!-- 388E3C -->
                                
								
								<form action="/orari_Autobus_s" method="GET" class="alignContent">
									<img class="imgResize" src="images/bus-stop-white.png" />
									<div class="row">
										<p style="color: white; ">Orari Trasporti</p>
									</div>
									<div class="form-group">
										<div class="row col-xs-12 col-sm-6">
											<input class="form-control text-center col-sm-offset-7 col-xs-offset-1" type="text" name="dest" value="Trento-Autostaz."></input>
										</div>
									</div>
									<br/>
									<div class="row col-xs-12 col-sm-12">
										<input  type="submit" class="btn btn-primary col-xs-offset-2 col-sm-offset-1"  ></input>
									</div>
								</form>
						</div>
					</div>
					<div class="row">
						<div class="col-xs-6 alignContainer" style="background-color: #F7AA1B; height: 45vh"> <!-- E65100 -->
							<a href="/calendar_s" class="alignContent" >
								<img class="imgResize" src="images/calendar-white.png" />
								<p style="color: white; ">Il tuo calendario</p> 
							</a>
						</div>
						<div class="col-xs-6 alignContainer" style="background-color: #0F7A1E; height: 45vh">  <!-- FFB300 -->
							<a href="/aule_libere" class="alignContent" >
								<img class="imgResize" src="images/aule.png" />
								<p style="color: white; ">Aule Libere</p> 
							</a>
						</div>
					</div>				
				</div>
				
				
				
            </div>
			
			<footer class="footer footerStyle">
				<div id="groupPopover" class="input-group"  data-container="body" data-toggle="popover" data-placement="top" data-content="Attendi">
				    <input type="text" class="form-control" id="txtInputValue" placeholder="Cosa stai cercando?">
					<span class="input-group-btn">
						<button class="btn btn-default" id="btnSend" onclick="sendToBot()"><span class="glyphicon glyphicon-send"></span></a>
					</span>
				</div>
			</footer>
        </div>



        <div class="overlay"></div>

        <!-- jQuery CDN -->
        <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
        <!-- Bootstrap Js CDN -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <!-- jQuery Custom Scroller CDN -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js"></script>

        <script type="text/javascript">
            $(document).ready(function () {
                $("#sidebar").mCustomScrollbar({
                    theme: "minimal"
                });

                $('#dismiss, .overlay').on('click', function () {
                    $('#sidebar').removeClass('active');
                    $('.overlay').fadeOut();
                });

                $('#sidebarCollapse').on('click', function () {
                    $('#sidebar').addClass('active');
                    $('.overlay').fadeIn();
                    $('.collapse.in').toggleClass('in');
                    $('a[aria-expanded=true]').attr('aria-expanded', 'false');
                });
            });
			
			// quando viene cliccato il button "Invia" viene chiamata la pagina "bot" e gli viene passato il testo inserito dall'utente
			function sendToBot()
			{
                $('[data-toggle="popover"]').popover();

				//window.location = "/bot?v=" + $("#txtInputValue").val();
                var msg = $("#txtInputValue").val();

                var url = "https://is2-progetto.herokuapp.com/bot_message?msg=" + msg;
                //var url = "http://127.0.0.1:8080/bot_message?msg=" + msg; //PER TEST LOCALE
		
		$.ajaxPrefilter( function (options) {
		  if (options.crossDomain && jQuery.support.cors) {
			var http = (window.location.protocol === 'http:' ? 'http:' : 'https:');
			options.url = http + '//cors-anywhere.herokuapp.com/' + options.url;
		  }
		});
                var data;
                //console.log(result);
                $.ajax({
                    url: url,
                    success: function(data) {
                        $('#groupPopover').attr("data-content", data.displayText);
                        $('#groupPopover').popover('show');
                    }
                });
			}
        </script>
    </body>
</html>
